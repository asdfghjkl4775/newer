<!DOCTYPE HTML>
<html>
<head>
    <title>RestArt</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <link rel="stylesheet" href="{{ url_for('static', path='ai_recomm/css/recommmain2.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='ai_recomm/css/bootstrap-responsive.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='ai_recomm/css/prettyPhoto.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='ai_recomm/css/custom-styles.css') }}">
    <script src="{{ url_for('static', path='ai_recomm/js/bootstrap.js') }}"></script>
    <script src="{{ url_for('static', path='ai_recomm/js/jquery.prettyPhoto.js') }}"></script>
    <script src="{{ url_for('static', path='ai_recomm/js/jquery.custom.js') }}"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="{{ url_for('static', path='ai_recomm/css/bootstrap2.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', path='ai_recomm/css/style.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', path='ai_recomm/css/nav_top3.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', path='ai_recomm/css/responsive.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', path='ai_recomm/css/colors.css') }}" rel="stylesheet">
    <style>
        @media (max-width: 850px) {
            #chooseFile {
                width: 70px;
            }
        }

        .container2 {
            display: none;
        }

        .picture-display-flex {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .addImage {
            width: 798px;
            height: 300px;
            background-color: white;
            border-radius: 20px 20px / 20px 20px;
            overflow: hidden;
            margin: 10px 0px 10px 0px;
            z-index: 1;
            position: relative;
            display: flex;
            justify-content: center;
        }

            .addImage img {
                width: auto !important;
                height: 100%;
                object-fit: cover;
            }

        .container_2 {
            position: absolute;
            z-index: 1;
            top: 83%;
            left: 46%;
        }

        .image-upload {
            flex: 1;
            display: flex;
            align-items: center;
        }

        #chooseFile {
            visibility: hidden;
        }

        .buttonContainer {
            position: relative;
            left: -70%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-left: 10px;
            background-color: black;
            color: white;
            border-radius: 30px;
            padding: 10px;
            font-size: 0.8em;
            cursor: pointer;
        }

            .buttonContainer #submitButton {
                color: white;
                background-color: black;
                border-top: none;
                border-left: none;
            }

        .gallery-item img {
            width: 100%; /* ì´ë¯¸ì§€ ë„ˆë¹„ë¥¼ ì»¨í…Œì´ë„ˆì˜ 100%ë¡œ ì„¤ì • */
            height: 200px; /* ê³ ì • ë†’ì´ ì„¤ì • */
            object-fit: cover; /* ì´ë¯¸ì§€ê°€ ì»¨í…Œì´ë„ˆë¥¼ ê½‰ ì±„ìš°ë„ë¡ í•˜ë©´ì„œ ì¢…íš¡ë¹„ ìœ ì§€ */
            border-radius: 10px; /* ì´ë¯¸ì§€ì— ë‘¥ê·¼ ëª¨ì„œë¦¬ íš¨ê³¼ ì ìš© */
        }

        .gallery-item {
            margin-bottom: 20px; /* ê°¤ëŸ¬ë¦¬ ì•„ì´í…œ ê°„ì˜ ê°„ê²© ì¡°ì • */
            background: #f8f8f8; /* ë°°ê²½ìƒ‰ ì„¤ì • */
            padding: 10px; /* íŒ¨ë”© ì„¤ì • */
            border: 1px solid #eaeaea; /* í…Œë‘ë¦¬ ì„¤ì • */
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); /* ê·¸ë¦¼ì íš¨ê³¼ */
        }
    </style>
</head>
<body style="background: white">
    <div id="wrapper2" style="height: 100px; font-size: 40px; align-content: center; text: black; padding: 30px; background: white">
        RestArt
    </div>
    <form class="inputImage picture-display-flex" method="post" enctype="multipart/form-data" style="background: white" id="uploadForm">
        <!-- ì´ë¯¸ì§€ íŒŒì¼ ë°ì´í„°ì— ì•Œë§ëŠ” enctype ì„¤ì • -->
        <div class="addImage" id="image-show" style="border-bottom: 2px solid #6699FF; border-right: 2px solid #3366FF; border-left: 2px solid #99CCFF;">
            <!-- ì´ë¯¸ì§€ ë„ìš¸ ê³µê°„ -->
        </div>
        <div class="container_2">
            <div class="image-upload" id="image-upload">
                <div class="button2">
                    <label for="chooseFile">
                        ğŸ‘‰ CLICK HERE! ğŸ‘ˆ
                    </label>
                </div>
                <input type="file" id="chooseFile" name="chooseFile" accept="image/*" onchange="loadFile(this)">
                <div class="fileContainer">
                    <div class="buttonContainer">
                        <button onclick="selectRandomImage()" type="submit" id="submitButton">SUBMIT</button>
                    </div>
                </div>

            </div>

        </div>
    </form>
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

    <!-- Dropzone css+js -->
    <link rel="stylesheet" href="https://rawgit.com/enyo/dropzone/master/dist/dropzone.css" />
    <script src="https://rawgit.com/enyo/dropzone/master/dist/dropzone.js"></script>

    <!-- í´ëŸ¬ìŠ¤í„°ë§ ì¶œë ¥ -->
    <div class="intro__cluster" style="background-color: white; padding: 40px 40px 10px 40px; display: none">
        <section id="intro" class="main">
            <h2>ì—…ë¡œë“œí•œ ì´ë¯¸ì§€ì˜ ìƒ‰ ë¶„ì„</h2>
            <div class="main__img">
                <img id="randomImage" src="" alt="Clustered Image" width="400" height="400">
            </div>
            <div class="text2">
                <h1>ì¶”ì²œëœ ë‹¨ì–´ : </h1>
                <h1>{{ fin[0] }}, {{ fin[1] }}, {{ fin[2] }}</h1>
            </div>
        </section>
    </div>
    <!-- ì‘í’ˆ ì¶”ì²œ íŒŒíŠ¸ -->
    <h2 class="recom_h2" style="text-align: center; margin: 30px 0 50px 0;">ì‘í’ˆ ì¶”ì²œ</h2>
    <div class="container2" id="container2">
        <div class="row">
            <!-- Gallery Items -->
            <div class="span12 gallery">
                <div class="row clearfix">
                    <ul class="gallery-post-grid holder">
                        <!-- Gallery Item 1 -->
                        <li class="span4 gallery-item" data-id="id-1" data-type="illustration">
                            <span class="gallery-hover-3col hidden-phone hidden-tablet">
                                <span class="gallery-icons">
                                    <a href="{{ url_for('static', path='ai_recomm/image/gallery/ê°•ë‘í˜•_ì†Œí’ê°€ëŠ” ë‚ .jpg') }}" class="item-zoom-link lightbox" title="Custom Illustration" data-rel="prettyPhoto"></a>
                                    <a href="gallery-single.htm" class="item-details-link"></a>
                                </span>
                            </span>
                            <a href="gallery-single.htm"><img src="{{ url_for('static', path='ai_recomm/image/gallery/ê°•ë‘í˜•_ë¹› - ì‚°í† ë¦¬ë‹ˆ.jpg') }}" alt="Gallery"></a>
                            <span class="project-details"><a href="gallery-single.htm">Custom Illustration</a>For an international add campaign.</span>
                        </li>
                        <!-- Pagination -->
                        <div class="pagination">
                            <ul>
                                <li class="active"><a href="#">Prev</a></li>
                                <li class="active"><a href="#">1</a></li>
                                <li><a href="#">2</a></li>
                                <li><a href="#">3</a></li>
                                <li><a href="#">4</a></li>
                                <li><a href="#">Next</a></li>
                            </ul>
                        </div>
                </div><!-- End gallery list -->
            </div><!-- End container row -->
        </div>
</body>
<script>
    function loadFile(input) {
        let file = input.files[0]; // ì„ íƒëœ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°
        let container = document.getElementById('image-show');

        // ê¸°ì¡´ ì´ë¯¸ì§€ê°€ ìˆìœ¼ë©´ ì œê±°
        let existingImage = document.getElementById('img-id');
        if (existingImage) {
            container.removeChild(existingImage);
        }

        // ìƒˆ ì´ë¯¸ì§€ ì¶”ê°€
        let newImage = document.createElement("img");
        newImage.src = URL.createObjectURL(file);
        newImage.id = "img-id";
        newImage.style.height = "100%";
        newImage.style.objectFit = "cover";

        // ì´ë¯¸ì§€ë¥¼ image-show divì— ì¶”ê°€
        container.appendChild(newImage);

        // ë²„íŠ¼ í…ìŠ¤íŠ¸ë¥¼ SUBMITìœ¼ë¡œ ë³€ê²½
        let button = document.getElementById("submitButton");
        button.innerText = "SUBMIT";

        // container2ì™€ intro__cluster ìŠ¤íƒ€ì¼ì„ noneìœ¼ë¡œ ë³€ê²½
        let elements = document.querySelectorAll('#container2, .intro__cluster');
        elements.forEach(function (element) {
            element.style.display = "none";
        });
    }

    document.getElementById("submitButton").addEventListener("click", function () {
        let elements = document.querySelectorAll('#container2, .intro__cluster');

        // Get the image element
        let imgElement = document.getElementById("img-id");

        // Check if the image exists
        if (!imgElement) {
            // If the image does not exist, hide container2 and intro__cluster and return
            elements.forEach(function (element) {
                element.style.display = "none";
            });
            return;
        }

        elements.forEach(function (element) {
            // Get the current display style of the element
            let currentDisplay = getComputedStyle(element).display;

            // If the element is hidden, show it; otherwise, hide it
            if (currentDisplay === "none") {
                element.style.display = "flex"; // Change display to flex for side-by-side alignment
            } else {
                element.style.display = "none";
            }
        });

        // Remove the image if it exists
        if (imgElement) {
            imgElement.parentNode.removeChild(imgElement);
        }

        // Change the button text from "SUBMIT" to "RESET" and vice versa
        let button = document.getElementById("submitButton");
        if (button.innerText === "SUBMIT") {
            button.innerText = "RESET";
        } else if (button.innerText === "RESET") {
            button.innerText = "SUBMIT";
        }
    });
</script>
<script>
    document.getElementById("submitButton").addEventListener("click", function () {
        let galleryContainer = document.querySelector('.gallery-post-grid');
        galleryContainer.innerHTML = '';

        let imagePaths = [
            'static/ai_recomm/image/images/ê¹€ë³µë§Œ_ì˜¤ë©”ê¸° ë§ˆì„ì˜ ë´„.jpg',
            'static/ai_recomm/image/images/ê¹€ì„ ì¢…_ë‹¬í•­ì•„ë¦¬ ë´„ë§ì´.jpg',
            'static/ai_recomm/image/images/ê¹€ì„ íœ˜_ë¬´ì œ.jpg',
            "static/ai_recomm/image/images/ê¹€ì„±í˜¸_repeat & life #2.jpg",
            "static/ai_recomm/image/images/ê¹€ì„±í˜¸_í™ê¸¸ ìœ„.jpg",
            "static/ai_recomm/image/images/ê¹€ì€ì •_í™”ë ¤í•œ ë‚ .jpg",
            "static/ai_recomm/image/images/ê¹€ì¼ì§€_Somnium.jpg",
            "static/ai_recomm/image/images/ê¹€ì€ì§€_Everlasting Moment 3.jpg",
            "static/ai_recomm/image/images/ê¹€ì€í¬_ë‹¤ë¥¸ ì‹œê°„ì„ í–¥í•˜ì—¬â…£.jpg",
            "static/ai_recomm/image/images/ê¹€ì´ë¦°_ë¾°ì¡±í•˜ì§€ë§Œ ë¾°ì¡±í•˜ì§€ ì•Šì€ ë‚˜ë¬´.jpg",
            "static/ai_recomm/image/images/ê¹€ì´ìŠ¬_ì£½ì„±ì„±ë‹¹.jpg",
            "static/ai_recomm/image/images/ê¹€ìí˜œ_there_s a rule in a room.jpg",
            "static/ai_recomm/image/images/ê¹€ì¼ì§€_Somnium.jpg",
            "static/ai_recomm/image/images/ê¹€ìí˜œ_comfort zone.jpg",
            "static/ai_recomm/image/images/ê¹€ì •í¬_From the sea.jpg",
            "static/ai_recomm/image/images/ê¹€ì •í¬_ë‹¬ë¹›ì†Œë‚˜íƒ€(2)-ì¶¤ì¶”ëŠ” ë‹¬ë¹›.jpg",
            "static/ai_recomm/image/images/ê¹€ì§€ì„ _Canvas Gardening_03.jpg",
            "static/ai_recomm/image/images/ê¹€ì§€ì„ _city nomad.jpg",
            "static/ai_recomm/image/images/ê¹€ì§€ìš°_ìˆ².jpg",
            "static/ai_recomm/image/images/ê¹€ì§€í˜œ_WHITE FLOW 2.jpg",
            "static/ai_recomm/image/images/ê¹€ì§€í¬_ì •ë¬¼35.jpg",
            "static/ai_recomm/image/images/ê¹€ì§„í¬_Jini Blue.jpg",
            "static/ai_recomm/image/images/ê¹€íƒœí˜•_ë§ˆí”ì‚´ì˜ ì±…ìƒ.jpg",
            "static/ai_recomm/image/images/ê¹€íƒœë¦°_My Dear - 21.jpg",
            "static/ai_recomm/image/images/ê¹€íƒœê· _í­ê·„ë“¤.jpg",
            "static/ai_recomm/image/images/ê°•ë‘í˜•_ì†Œí’ê°€ëŠ” ë‚ .jpg",
            "static/ai_recomm/image/images/ê°•ë‘í˜•_ë¹› - ì‚°í† ë¦¬ë‹ˆ.jpg",
            "static/ai_recomm/image/images/VESPER KWON_Sureness. 2.jpg",
            "static/ai_recomm/image/images/TOACHI_Music makes me happy.jpg",
            "static/ai_recomm/image/images/TOACHI_ICE CREAM II.jpg"
        ];

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                let j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        shuffle(imagePaths);

        imagePaths.forEach(function (path) {
            let listItem = document.createElement('li');
            listItem.className = 'span4 gallery-item';

            let img = document.createElement('img');
            img.src = path;
            img.alt = 'Gallery';

            listItem.appendChild(img);

            let details = document.createElement('span');
            details.className = 'project-details';
            let detailLink = document.createElement('a');
            detailLink.href = 'gallery-single.htm';
            detailLink.textContent = 'View Details';
            details.appendChild(detailLink);

            listItem.appendChild(details);
            galleryContainer.appendChild(listItem);
        });
    });
</script>

<script>
    document.getElementById('uploadForm').addEventListener('submit', async function (e) {
        e.preventDefault(); // Prevent the default form submission
        const formData = new FormData(this);
        const response = await fetch('/upload/', {
            method: 'POST',
            body: formData,
        });
        const result = await response.json();

        if (response.ok) {
            console.log('Upload successful:', result);
            const imageShowDiv = document.getElementById('image-show');
            imageShowDiv.innerHTML = '<img src="' + result.result_image + '" width="400" height="400" />';
        } else {
            console.error('Upload failed:', result);
        }
    });
</script>

<script>
    function selectRandomImage() {
        const imagePaths = [
            'static/results/cluster1.png',
            'static/results/cluster2.png',
            'static/results/cluster3.png',
            'static/results/cluster4.png',
            'static/results/cluster5.png',
            'static/results/cluster6.png',
            'static/results/cluster7.png'
        ];

        // ì´ë¯¸ì§€ ê²½ë¡œ ì¤‘ì—ì„œ ëœë¤ìœ¼ë¡œ í•˜ë‚˜ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
        const randomImagePath = imagePaths[Math.floor(Math.random() * imagePaths.length)];

        // ì„ íƒëœ ì´ë¯¸ì§€ ê²½ë¡œë¡œ ì´ë¯¸ì§€ ì†ŒìŠ¤ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
        document.getElementById('randomImage').src = randomImagePath;
    }
</script>


</html>